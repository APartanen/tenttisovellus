(this.webpackJsonpdemo=this.webpackJsonpdemo||[]).push([[0],{124:function(t,e,n){"use strict";n.r(e);var s=n(0),a=n.n(s),i=n(76),c=n.n(i),o=(n(90),n(31),n(145)),r=n(142),l=n(45),d=n.n(l),u=n(64),j=n.n(u),h=n(77),y=n(4),x=n(144),p=n(143),b=n(1),v=function(t){var e=t.dispatch,n=(t.kysymysIndex,Object(s.useState)(" ")),a=Object(y.a)(n,2),i=a[0],c=a[1];return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(p.a,{elevation:"5",sx:{width:"100%",margin:"2%",padding:"1%"},children:Object(b.jsx)("div",{className:"answerlines",children:Object(b.jsxs)("div",{className:"answerline",children:[Object(b.jsx)("input",{value:i,type:"text",id:"inputLis\xe4\xe4Kysymys",onChange:function(t){c(t.target.value)}}),Object(b.jsx)("button",{onClick:function(){return e({type:"CREATE_KYSYMYS",data:{kysymys:i}})},children:"Lis\xe4\xe4 kysymys"})]})})})})},g=function(t){var e=t.dispatch,n=t.tenttiId,s=t.tenttiIndex;return console.log("delexam",n),Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(p.a,{elevation:"5",sx:{width:"100%",margin:"2%",padding:"1%"},children:Object(b.jsx)("div",{className:"answerlines",children:Object(b.jsx)("div",{className:"answerline",children:Object(b.jsx)("button",{onClick:function(){return e({type:"DEL_EXAM",data:{id:n,tenttiIndex:s}})},children:"Poista tentti"})})})})})};var m=function(t){var e=t.tentti,n=t.dispatch,a=t.setTentit,i=t.tenttiIndex,c=t.tentit,l=t.tenttiID;return Object(s.useEffect)((function(){console.log(c);var t=JSON.parse(JSON.stringify(c));t[i]=e,console.log(t),a(t)}),[e]),Object(b.jsx)(p.a,{sx:{display:"flex",margin:"2%",width:"91.7%",justifyContent:"center",verticalAlign:"middle",alignItems:"center"},elevation:"3",children:Object(b.jsxs)(x.a,{className:"container",children:[Object(b.jsxs)("p",{children:["tentin id: ",e.id]}),Object(b.jsxs)(o.a,{sx:{width:"90%"},children:[e.sis\u00e4lt\u00f6.map((function(t,s){return Object(b.jsx)("div",{id:s,children:Object(b.jsx)(N,{kysymysProp:t,tentti:e,kysymykset:e.sis\u00e4lt\u00f6,"p\xe4\xe4kysymyksetIndex":s,dispatch:n})},s)})),Object(b.jsx)(r.a,{children:Object(b.jsx)(v,{dispatch:n})}),Object(b.jsx)(r.a,{children:Object(b.jsx)(g,{dispatch:n,tenttiId:l,tenttiIndex:i})})]})]})})},O=n(34),k=n.n(O),f="/api/tentit",I={register:function(t,e){return k.a.post("/api/register",{username:t,password:e}).then((function(t){return t}))},login:function(t,e){return k.a.post("/api/login",{username:t,password:e}).then((function(t){return t}))},getAll:function(t){return k.a.get(f,{headers:{Authorization:"Bearer ".concat(t)}}).then((function(t){return t.data}))},create:function(t,e){return k.a.post(f,e,{headers:{Authorization:"Bearer ".concat(t)}}).then((function(t){return t.data}))},del:function(t,e){return k.a.delete("".concat(f,"/").concat(e),{},{headers:{Authorization:"Bearer ".concat(t)}}).then((function(t){return t.data})).catch((function(t){return console.log("err",t)})).then((function(t){return t}))},edit:function(t,e,n){return k.a.put("".concat(f,"/").concat(e),n,{headers:{Authorization:"Bearer ".concat(t)}}).then((function(t){return t.data})).catch((function(t){return console.log("err",t)})).then((function(t){return t}))}},S=n(140);var A=function(t){var e=t.setShowRegisterComponent,n=Object(s.useState)(""),a=Object(y.a)(n,2),i=a[0],c=a[1],l=Object(s.useState)(""),d=Object(y.a)(l,2),u=d[0],j=d[1],h=function(t){t.preventDefault(),console.log("registerFunction: ",i,u),I.register(i,u).then((function(t){console.log(t)})).catch((function(t){console.log(t)})),e(!1)};return Object(b.jsx)(p.a,{sx:{display:"flex",margin:"2%",width:"50%",justifyContent:"center",verticalAlign:"middle",alignItems:"center"},elevation:"3",children:Object(b.jsx)(x.a,{className:"container",children:Object(b.jsx)(o.a,{sx:{width:"90%"},children:Object(b.jsx)(r.a,{sx:{margin:"2%"},children:Object(b.jsxs)("form",{onSubmit:h,sx:{display:"flex",margin:"2%",justifyContent:"center"},children:["Register",Object(b.jsxs)("div",{children:["username: ",Object(b.jsx)("input",{value:i,onChange:function(t){c(t.target.value)}})]}),Object(b.jsxs)("div",{children:["password: ",Object(b.jsx)("input",{type:"password",value:u,onChange:function(t){j(t.target.value)}})]}),Object(b.jsx)("div",{children:Object(b.jsx)(S.a,{type:"submit",onClick:h,variant:"contained",size:"medium",sx:{margin:"2%"},children:"Register"})})]})})})})})};var C=function(t){t.loggedIn;var e=t.setLoggedIn,n=t.setDataNoudettu,a=Object(s.useState)(""),i=Object(y.a)(a,2),c=i[0],l=i[1],d=Object(s.useState)(""),u=Object(y.a)(d,2),j=u[0],h=u[1],v=Object(s.useState)(!1),g=Object(y.a)(v,2),m=g[0],O=g[1];return Object(b.jsx)("div",{children:!0===m?Object(b.jsx)(A,{setShowRegisterComponent:O}):Object(b.jsx)(p.a,{sx:{display:"flex",margin:"2%",padding:"2%",width:"400px",height:"100px",justifyContent:"center",verticalAlign:"middle",alignItems:"center"},elevation:"3",children:Object(b.jsx)(x.a,{className:"container",children:Object(b.jsx)(o.a,{sx:{width:"90%"},children:Object(b.jsx)(r.a,{children:Object(b.jsx)("form",{onSubmit:function(t){t.preventDefault(),console.log("loginfunction",c,j),I.login(c,j).then((function(t){console.log("token:",t.data);localStorage.setItem("token",JSON.stringify(t.data)),e(!0),n(!1)})).catch((function(t){console.log(t)}))},children:Object(b.jsxs)("div",{sx:{justifyContent:"center",verticalAlign:"middle",alignItems:"center"},children:[Object(b.jsxs)("div",{sx:{margin:"2%"},children:["username: ",Object(b.jsx)("input",{value:c,onChange:function(t){l(t.target.value)}})]}),Object(b.jsxs)("div",{sx:{margin:"2%"},children:["password: ",Object(b.jsx)("input",{type:"password",value:j,onChange:function(t){h(t.target.value)}})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)(S.a,{type:"submit",variant:"contained",size:"medium",sx:{margin:"2%"},children:"Login"}),Object(b.jsx)(S.a,{onClick:function(t){t.preventDefault(),console.log("register"),O(!0)},variant:"contained",size:"medium",sx:{margin:"2%"},children:"Register"})]})]})})})})})})})},V=Object(s.createContext)();var w=function(){var t=Object(s.useState)(!1),e=Object(y.a)(t,2),n=e[0],a=e[1],i=Object(s.useState)(!0),c=Object(y.a)(i,2),o=c[0],r=c[1],l=Object(s.useState)([]),d=Object(y.a)(l,2),u=d[0],x=d[1],p=Object(s.useState)(),v=Object(y.a)(p,2),g=v[0],O=v[1];Object(s.useEffect)((function(){if(!1===o){!function(){console.log("use effect");var t=JSON.parse(localStorage.getItem("token"));I.getAll(t).then((function(t){console.log("result data",t),x(t),r(!0)}))}()}}),[o]);var k=function(t){var e=JSON.parse(localStorage.getItem("token")),n=JSON.parse(JSON.stringify(u));switch(t.type){case"DEL_EXAM":console.log("Del exam o",t),I.del(e,t.data.id).then((function(t){console.log("delete response",t)})),O(),n.forEach((function(e,s){e.id===t.data.id&&console.log("removed exam:",n.splice(s,1))}));break;case"CREATE_KYSYMYS":n[g].sis\u00e4lt\u00f6.push([{"p\xe4\xe4kysymys":t.data.kysymys,oikeaVastaus:1,id:n.length,vastausVaihtoehdot:[]}]),I.edit(e,n[g].id,n[g]).then((function(t){console.log("add question response",t)}));break;case"DEL_KYSYMYS":n[g].sis\u00e4lt\u00f6.splice(t.data.p\u00e4\u00e4kysymyksetIndex,1),I.edit(e,n[g].id,n[g][0]).then((function(t){console.log("del question response",t)}));break;case"EDIT_KYSYMYS":n[g].sis\u00e4lt\u00f6[t.data.p\u00e4\u00e4kysymysIndex][0].p\u00e4\u00e4kysymys=t.data.kysymys,I.edit(e,n[g].id,n[g]).then((function(t){console.log("edit question text",t)}));break;case"CHECK_VASTAUS":var s=n[g].sis\u00e4lt\u00f6[t.data.p\u00e4\u00e4kysymysIndex][0].vastausVaihtoehdot;s[t.data.vastausIndex].booleanArvoVastaukselle=!s[t.data.vastausIndex].booleanArvoVastaukselle,n[g].sis\u00e4lt\u00f6[t.data.p\u00e4\u00e4kysymysIndex][0].vastausVaihtoehdot=s,I.edit(e,n[g].id,n[g]).then((function(t){console.log("Check answer response",t)}));break;case"CREATE_VASTAUS":var a=n[g].sis\u00e4lt\u00f6[t.data.p\u00e4\u00e4kysymysIndex][0].vastausVaihtoehdot;a.push({vastaus:t.data.vastausVaihtoehto,booleanArvoVastaukselle:!1,komponentinId:a.length}),n[g].sis\u00e4lt\u00f6[t.data.p\u00e4\u00e4kysymysIndex][0].vastausVaihtoehdot=a,I.edit(e,n[g].id,n[g]).then((function(t){console.log("create answer response",t)}));break;case"DEL_VASTAUS":n[g].sis\u00e4lt\u00f6[t.data.p\u00e4\u00e4kysymysIndex][0].vastausVaihtoehdot.splice(t.data.vastausIndex,1),I.edit(e,n[g].id,n[g]).then((function(t){console.log("del answer response",t)}));break;case"EDIT_VASTAUS":n[g].sis\u00e4lt\u00f6[t.data.p\u00e4\u00e4kysymysIndex][0].vastausVaihtoehdot[t.data.vastausIndex].vastaus=t.data.vastaus,I.edit(e,n[g].id,n[g]).then((function(t){console.log("edit answer response",t)}));break;default:throw"Jokin vika"}x(n)};function f(){return(f=Object(h.a)(j.a.mark((function t(){var e;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I.getAll();case 2:e=t.sent,console.log("checkdb",e.data),console.log("check valittu tentti listassa",g),console.log("check tentit",u),console.log("check id",u[g].id);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(b.jsx)("div",{children:!0===n?Object(b.jsxs)("div",{children:[!0===o&&Object(b.jsxs)("div",{children:[" ",u.map((function(t,e){return Object(b.jsxs)("button",{onClick:function(){O(e)},children:["N\xe4yt\xe4 tentti ",e]})}))]}),Object(b.jsx)("button",{onClick:function(){return function(t){var e=JSON.parse(localStorage.getItem("token"));I.create(e,{tenttiNimi:"testiTentti","sis\xe4lt\xf6":[[{"p\xe4\xe4kysymys":"testiTentti",oikeaVastaus:1,id:0,vastausVaihtoehdot:[{vastaus:"ei",booleanArvoVastaukselle:!1,komponentinId:0},{vastaus:"kyll\xe4",booleanArvoVastaukselle:!1,komponentinId:1},{vastaus:"ehk\xe4",booleanArvoVastaukselle:!1,komponentinId:2}]}],[{"p\xe4\xe4kysymys":"Onko JavaScript kivaa?",oikeaVastaus:1,id:0,vastausVaihtoehdot:[{vastaus:"ei",booleanArvoVastaukselle:!1,komponentinId:0},{vastaus:"kyll\xe4",booleanArvoVastaukselle:!1,komponentinId:1},{vastaus:"ehk\xe4",booleanArvoVastaukselle:!1,komponentinId:2}]}],[{"p\xe4\xe4kysymys":"Onko JavaScript kivaa?",oikeaVastaus:1,id:0,vastausVaihtoehdot:[{vastaus:"ei",booleanArvoVastaukselle:!1,komponentinId:0},{vastaus:"kyll\xe4",booleanArvoVastaukselle:!1,komponentinId:1},{vastaus:"ehk\xe4",booleanArvoVastaukselle:!1,komponentinId:2}]}]]}).then((function(e){console.log("tee tentti jonka id on: ",e.id),console.log("lis\xe4tty tentti:",e);var n=JSON.parse(JSON.stringify(t));n.push(e),x(n)})).catch((function(t){}))}(u)},children:"lis\xe4\xe4 tentti"}),Object(b.jsx)(V.Provider,{value:{dispatch:k},children:void 0!==g&&Object(b.jsx)(m,{tentti:u[g],dispatch:k,setTentit:x,tenttiIndex:g,tentit:u,tenttiID:u[g].id})}),Object(b.jsx)("button",{onClick:function(){return function(){return f.apply(this,arguments)}()},children:"Tarkista tilanne"})]}):Object(b.jsx)(C,{loggedIn:n,setLoggedIn:a,setDataNoudettu:r})})},E=function(t){var e=t.vastausVaihtoehdot,n=(t.kysymys,t.kysymysIndex),a=Object(s.useContext)(V).dispatch;return Object(b.jsx)(b.Fragment,{children:e.map((function(t,e){return!0===t.booleanArvoVastaukselle?Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"answerlines",children:Object(b.jsxs)("div",{className:"answerline",children:[Object(b.jsx)("input",{type:"checkbox",id:e,checked:!0,onClick:function(){return a({type:"CHECK_VASTAUS",data:{"p\xe4\xe4kysymysIndex":n,vastausIndex:e}})}}),Object(b.jsx)("input",{id:"vastausInput".concat(e),value:t.vastaus,type:"text",onChange:function(t){return a({type:"EDIT_VASTAUS",data:{"p\xe4\xe4kysymysIndex":n,vastausIndex:e,vastaus:t.target.value}})}}),Object(b.jsx)(d.a,{onClick:function(){return a({type:"DEL_VASTAUS",data:{"p\xe4\xe4kysymysIndex":n,vastausIndex:e}})}})]})})}):Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"answerlines",children:Object(b.jsxs)("div",{className:"answerline",children:[Object(b.jsx)("input",{type:"checkbox",id:e,onClick:function(){return a({type:"CHECK_VASTAUS",data:{"p\xe4\xe4kysymysIndex":n,vastausIndex:e}})}}),Object(b.jsx)("input",{id:"vastausInput".concat(e),value:t.vastaus,type:"text",onChange:function(t){return a({type:"EDIT_VASTAUS",data:{"p\xe4\xe4kysymysIndex":n,vastausIndex:e,vastaus:t.target.value}})}}),Object(b.jsx)(d.a,{onClick:function(){return a({type:"DEL_VASTAUS",data:{"p\xe4\xe4kysymysIndex":n,vastausIndex:e}})}})]})})})}))})},T=function(t){var e=t.kysymysIndex,n=Object(s.useContext)(V).dispatch,a=Object(s.useState)(" "),i=Object(y.a)(a,2),c=i[0],o=i[1];return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("input",{placeholder:"lis\xe4\xe4 vastaus",id:"Lis\xe4\xe4 vastaus",onChange:function(t){o(t.target.value)}}),Object(b.jsx)("button",{onClick:function(){return n({type:"CREATE_VASTAUS",data:{"p\xe4\xe4kysymysIndex":e,vastausVaihtoehto:c}})},children:"Lis\xe4\xe4 vastaus"})]})},N=function(t){var e=t.kysymysProp,n=t.p\u00e4\u00e4kysymyksetIndex,a=Object(s.useContext)(V).dispatch;return Object(b.jsx)(o.a,{children:Object(b.jsx)(p.a,{elevation:"14",sx:{width:"100%",margin:"2%",padding:"1%"},children:e.map((function(t,e){return Object(b.jsxs)(r.a,{className:"textbox",children:[Object(b.jsxs)(b.Fragment,{children:[" ",Object(b.jsx)("input",{value:t.p\u00e4\u00e4kysymys,type:"text",onChange:function(t){return a({type:"EDIT_KYSYMYS",data:{"p\xe4\xe4kysymysIndex":n,kysymys:t.target.value}})}}),"  ",Object(b.jsx)(d.a,{onClick:function(){return a({type:"DEL_KYSYMYS",data:{"p\xe4\xe4kysymyksetIndex":n}})}})," "]}),Object(b.jsx)(E,{vastausVaihtoehdot:t.vastausVaihtoehdot,kysymysIndex:n}),Object(b.jsx)(T,{kysymysIndex:n})]})}))})})};n(57),n(9);var D=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,146)).then((function(e){var n=e.getCLS,s=e.getFID,a=e.getFCP,i=e.getLCP,c=e.getTTFB;n(t),s(t),a(t),i(t),c(t)}))};c.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(w,{})}),document.getElementById("root")),D()},31:function(t,e,n){},90:function(t,e,n){}},[[124,1,2]]]);
//# sourceMappingURL=main.4edc4a6e.chunk.js.map